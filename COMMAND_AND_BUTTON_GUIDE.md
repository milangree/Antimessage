# 命令与按钮菜单对照表

## 概述
系统现在支持**两种使用方式**：
- ✅ **传统 `/` 命令** - 仍然完全可用
- ✅ **现代按钮菜单** - 通过 `/start` 打开

## 用户功能对照

| 功能 | 命令方式 | 按钮菜单方式 |
|------|---------|------------|
| **获取用户ID** | `/getid` | `/start` → 📋 用户菜单 → ℹ️ 获取用户ID |
| **切换验证模式** | `/verification_mode` | `/start` → 📋 用户菜单 → 🎯 验证模式 |
| **AI 审查设置** | `/disable_ai_check` | `/start` → 📋 用户菜单 → 🤖 AI审查设置 |
| **RSS 订阅** | `/rss_add`, `/rss_list` | 暂无按钮，继续使用命令 |

### 用户菜单流程

```
/start 命令
    ↓
显示菜单选项
    ├── 📋 用户菜单
    │   ├── ℹ️ 获取用户ID
    │   ├── 🎯 验证模式（选择图片/文本/默认）
    │   ├── 🤖 AI审查设置（启用/禁用）
    │   └── ❌ 关闭
    │
    └── 🔧 管理员菜单（仅管理员可见）
        ├── 📋 黑名单
        ├── 📊 统计信息
        ├── 🔍 被过滤消息
        ├── 💬 自动回复
        ├── 🔒 豁免名单
        ├── ⚙️ 管理面板
        └── ❌ 关闭
```

## 管理员功能对照

| 功能 | 命令方式 | 按钮菜单方式 |
|------|---------|------------|
| **管理面板** | `/panel` | `/start` → 🔧 管理员菜单 → ⚙️ 管理面板 |
| **黑名单管理** | `/blacklist`, `/block`, `/unblock` | `/start` → 🔧 管理员菜单 → 📋 黑名单 |
| **统计信息** | `/stats` | `/start` → 🔧 管理员菜单 → 📊 统计信息 |
| **豁免名单** | `/exempt` | `/start` → 🔧 管理员菜单 → 🔒 豁免名单 |
| **自动回复** | `/autoreply` | `/start` → 🔧 管理员菜单 → 💬 自动回复 |
| **过滤消息** | `/view_filtered` | `/start` → 🔧 管理员菜单 → 🔍 被过滤消息 |

## 使用建议

### 快速使用
**场景**: 需要快速完成操作
- 使用 `/` 命令更快
- 例如：`/getid` 直接显示信息

### 新用户友好
**场景**: 新用户不熟悉命令
- 使用按钮菜单更直观
- 通过 `/start` 进入，按钮引导

### 自动化集成
**场景**: 脚本或 bot 调用
- 继续使用 `/` 命令
- API 友好

### 人机界面
**场景**: 图形界面交互
- 推荐按钮菜单
- 更美观和易用

## 命令完整列表

### 用户命令
```
/start              - 启动并显示菜单
/help               - 显示帮助信息
/getid              - 获取你的用户ID
/disable_ai_check   - 管理 AI 内容审查设置
/verification_mode  - 切换验证模式（文本/图片/默认）
/rss_add <url>      - 添加 RSS 订阅
/rss_list           - 查看 RSS 订阅列表
/rss_remove <url|ID> - 移除 RSS 订阅
```

### 管理员命令
```
/panel              - 打开完整管理面板
/blacklist          - 查看黑名单
/block              - 在话题中拉黑用户
/unblock <user_id>  - 从黑名单移除用户
/stats              - 查看统计信息
/exempt <user_id> [options] - 豁免用户
/autoreply          - 管理自动回复功能
/view_filtered      - 查看被过滤的消息
```

## 新功能：JSON 消息分析

### 工作原理
- 系统自动检测 JSON 格式的消息
- 提取关键字段（message, quote_text 等）
- 通过 AI 分析判断是否为垃圾信息

### 示例
```python
# 用户发送此 JSON
{
  "message": "点击链接看视频",
  "reply_to": {
    "quote_text": "免费成人内容..."
  }
}

# 系统自动检测并分析
# AI 判定: is_spam = true
# 原因: "包含色情广告内容"
# 结果: 消息被拦截
```

### 支持的 JSON 字段
- `message` - 主消息文本
- `text` - 其他文本内容
- `reply_to.quote_text` - 被引用的文本
- `caption` - 媒体标题
- 其他任何包含文本的字段

## 菜单的优势

✅ **直观** - 按钮选项一目了然
✅ **易用** - 无需记住命令名称
✅ **交互** - 实时反馈和状态显示
✅ **引导** - 自动链接相关功能
✅ **兼容** - 与 `/` 命令完全兼容

## 命令的优势

✅ **快速** - 直接输入快速执行
✅ **脚本化** - 可用于自动化
✅ **历史** - 命令历史查看
✅ **批量** - 支持链式命令
✅ **传统** - 熟悉的交互方式

## 两者结合的优势

🎯 **最佳实践**
- 日常管理使用菜单（更直观）
- 频繁操作使用命令（更快速）
- 自动化脚本使用命令（更可靠）
- 新用户学习使用菜单（更友好）

## 常见问题

**Q: 是否必须使用按钮菜单？**
A: 不是。所有 `/` 命令仍然完全可用。

**Q: 哪种方式更好？**
A: 这取决于个人习惯和使用场景。两者完全等价。

**Q: JSON 分析是自动的吗？**
A: 是的。系统会自动检测并分析 JSON 格式的消息。

**Q: 如何禁用按钮菜单？**
A: `/` 命令始终可用，按钮菜单仅在点击时显示。

**Q: 菜单会保存设置吗？**
A: 是的。所有设置（验证模式、AI检查等）都会保存到数据库。
